package h3xadecimal.liteantiexploit.module.modules;

import com.github.retrooper.packetevents.event.PacketReceiveEvent;
import com.github.retrooper.packetevents.event.PacketSendEvent;
import com.github.retrooper.packetevents.protocol.packettype.PacketType;
import h3xadecimal.liteantiexploit.module.IPacketProcessor;
import h3xadecimal.liteantiexploit.utils.PlayerUtil;
import org.bukkit.GameMode;
import org.bukkit.entity.Player;

public class IllegalCI implements IPacketProcessor {

    @Override
    public String name() {
        return "IllegalCreativeInventory";
    }

    @Override
    public void onSend(PacketSendEvent event) {

    }

    @Override
    public void onReceive(PacketReceiveEvent event) {
        if (event.getPacketType() == PacketType.Play.Client.CREATIVE_INVENTORY_ACTION) {
            final Player player = PlayerUtil.fromPacket(event);
            if (player.getGameMode() != GameMode.CREATIVE) {
                event.setCancelled(true);
                alert(event);
            }
        }
    }
}
